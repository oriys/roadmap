import type { LessonGuide } from "../types"
import type { QuizQuestion } from "@/lib/types"

export const week6Guides: Record<string, LessonGuide> = {
  "cto-w6-1": {
    lessonId: "cto-w6-1",
    background: [
      "【招聘画像】有效的招聘从清晰的岗位画像开始：技术能力要求、软技能要求、文化匹配度和成长潜力。避免写'全能型'要求导致找不到人。",
      "【职级体系】清晰的职级体系（Career Ladder）让工程师看到成长路径，包含个人贡献者（IC）和管理者（Manager）两条通道。每个级别有明确的能力期望。",
      "【继任计划】关键岗位（如架构师、SRE 负责人、平台团队 Lead）的继任计划确保组织不因个人离职而受到重大影响。",
      "【人才密度】Netflix 强调高人才密度——保持团队中高水平人才的比例。这意味着招聘标准不能降低，同时需要在发展中帮助现有成员提升。",
      "【留存与成长】留住优秀人才的关键是提供有挑战性的工作、清晰的成长路径、有竞争力的薪酬和健康的文化。仅靠薪酬无法长期留人。"
    ],
    keyDifficulties: [
      "【招聘标准】在招聘压力下容易降低标准。需要坚守核心标准，同时在非核心要求上保持灵活（如特定技术栈经验可以培养）。",
      "【双通道平衡】IC 和 Manager 两条通道的待遇和影响力需要均衡，否则优秀的 IC 会被迫走管理路线。",
      "【继任时机】继任计划不是等人要走了才做。应该在关键岗位人员稳定时就开始培养候选人和记录关键知识。",
      "【绩效评估】技术人员的绩效评估既要看产出又要看影响力。避免只看代码量或故事点等表面指标。"
    ],
    handsOnPath: [
      "为 3 个关键岗位撰写招聘画像，明确必须项和加分项。",
      "设计或完善工程团队的职级体系，确保 IC 和 Manager 通道都有清晰的进阶标准。",
      "列出所有关键岗位（Bus Factor = 1 的角色），为每个岗位识别至少 1 个潜在继任者。",
      "与每个潜在继任者制定 6 个月的发展计划，包括技能提升目标和实践机会。",
      "回顾近 6 个月的离职情况，分析主要离职原因并制定改善措施。"
    ],
    selfCheck: [
      "你的招聘标准是否清晰且被一致执行？",
      "职级体系是否覆盖 IC 和 Manager 两条通道，且两条通道地位均等？",
      "关键岗位是否都有已识别的继任人选和培养计划？",
      "你是否了解团队成员的成长诉求和留存风险？",
      "绩效评估是否兼顾产出和影响力，避免表面指标？"
    ],
    extensions: [
      "研究 levels.fyi 上不同公司的职级体系对比。",
      "阅读 HBR 关于领导者为何不培养继任者的分析。",
      "学习 Netflix 的文化手册（Culture Deck），理解高人才密度的实践。",
      "探索 Engineering Manager 和 Staff Engineer 角色定义的最佳实践。"
    ],
    sourceUrls: [
      "https://www.levels.fyi/company",
      "https://hbr.org/2016/12/why-leaders-dont-produce-leaders"
    ]
  },
  "cto-w6-2": {
    lessonId: "cto-w6-2",
    background: [
      "【风险分类】技术风险可分为：安全风险（数据泄露、攻击）、可靠性风险（系统宕机、数据丢失）、合规风险（法规不达标）和人员风险（关键人员离职）。",
      "【OWASP SAMM】Software Assurance Maturity Model 提供了一个评估和改进软件安全实践的框架，覆盖治理、设计、实现、验证和运营五个维度。",
      "【BCP/DR】业务连续性计划（BCP）和灾难恢复（DR）确保在重大事故时业务能在可接受的时间内恢复。NIST 提供了详细的演练指南。",
      "【风险预警】好的风险管理不是事后救火，而是建立预警指标。例如：安全漏洞扫描频率、备份恢复测试结果、关键系统的 SLA 达标率。",
      "【演练文化】风险预案如果不演练，关键时刻很可能失效。建议按季度进行灾备演练和安全响应演练，验证预案的有效性。"
    ],
    keyDifficulties: [
      "【风险盲点】很多风险在出问题之前看不到。CTO 需要系统性地识别风险，包括技术依赖（单点故障）、供应商依赖和人员依赖。",
      "【优先级排序】风险管理资源有限，需要基于影响程度和发生概率对风险排序。高影响高概率的风险优先处理。",
      "【合规复杂性】不同行业和地区的合规要求不同（GDPR、等保、SOC 2 等）。CTO 需要与法务和安全团队紧密合作。",
      "【演练真实性】演练太简单验证不了预案，太真实可能影响生产。需要精心设计演练场景和范围。"
    ],
    handsOnPath: [
      "列出技术团队面临的 Top 5 风险，按影响程度和发生概率排序。",
      "使用 OWASP SAMM 对当前安全实践进行一次自评估，识别薄弱环节。",
      "为最高优先级的风险制定预警指标和应急响应流程。",
      "制定季度演练计划，覆盖灾备切换、安全响应和数据恢复场景。",
      "执行一次模拟演练，记录暴露的问题并制定改进措施。"
    ],
    selfCheck: [
      "你是否有一份更新过的风险清单，按优先级排序？",
      "关键系统是否有灾难恢复方案？恢复时间目标（RTO）是否明确？",
      "安全漏洞扫描和修复的频率是否足够？",
      "是否有按季度的灾备和安全响应演练计划？",
      "合规要求是否已经明确，并有专人负责跟进？"
    ],
    extensions: [
      "深入学习 OWASP SAMM 模型，制定安全实践改进路线图。",
      "研究 NIST 的应急计划指南，建立更完善的 BCP/DR 流程。",
      "探索 Chaos Engineering（混沌工程），通过主动注入故障提升系统韧性。",
      "学习 Threat Modeling 方法论，在设计阶段就识别安全风险。"
    ],
    sourceUrls: [
      "https://owaspsamm.org/model/",
      "https://www.nist.gov/publications/guide-test-plan-train-and-exercise-information-system-contingency-plan"
    ]
  }
}

export const week6Quizzes: Record<string, QuizQuestion[]> = {
  "cto-w6-1": [
    {
      id: "cto-w6-1-q1",
      question: "继任计划（Succession Planning）的核心目的是？",
      options: [
        "压缩薪资成本",
        "减少培训投入",
        "确保关键岗位有人接替，降低单点人员风险",
        "缩减团队规模"
      ],
      answer: 2,
      rationale: "继任计划关注关键岗位的可持续性，通过提前培养继任者来降低因关键人员离职带来的组织风险。"
    },
    {
      id: "cto-w6-1-q2",
      question: "设计职级体系时最需要注意的是？",
      options: [
        "只设管理通道",
        "IC 和 Manager 通道都要有清晰进阶标准且地位均等",
        "级别越多越好",
        "只看技术能力不看影响力"
      ],
      answer: 1,
      rationale: "双通道（IC + Manager）体系让工程师根据兴趣和能力选择发展方向，两条通道的待遇和影响力需均衡。"
    },
    {
      id: "cto-w6-1-q3",
      question: "留住优秀技术人才最关键的因素是？",
      options: [
        "仅靠高薪酬",
        "有挑战性的工作、清晰的成长路径和健康的文化",
        "放松工作要求",
        "频繁团建活动"
      ],
      answer: 1,
      rationale: "仅靠薪酬无法长期留人。有挑战性的工作、清晰的成长路径、有竞争力的薪酬和健康的文化缺一不可。"
    }
  ],
  "cto-w6-2": [
    {
      id: "cto-w6-2-q1",
      question: "风险演练的核心价值是？",
      options: [
        "增加团队工作量",
        "验证预案的有效性，暴露实际操作中的问题",
        "展示给管理层看",
        "替代日常监控"
      ],
      answer: 1,
      rationale: "风险预案如果不演练，关键时刻很可能失效。定期演练能验证预案有效性并暴露需要改进的环节。"
    },
    {
      id: "cto-w6-2-q2",
      question: "OWASP SAMM 框架用于？",
      options: [
        "衡量团队编码速度",
        "评估和改进软件安全实践的成熟度",
        "管理项目进度",
        "选择编程语言"
      ],
      answer: 1,
      rationale: "OWASP SAMM 提供评估和改进软件安全实践的框架，覆盖治理、设计、实现、验证和运营五个维度。"
    },
    {
      id: "cto-w6-2-q3",
      question: "风险管理中最需要避免的做法是？",
      options: [
        "系统性识别风险",
        "等问题发生了才被动应对，不做提前预警",
        "按季度演练",
        "与安全团队紧密合作"
      ],
      answer: 1,
      rationale: "好的风险管理是建立预警指标和演练机制，主动识别和应对风险，而非等事故发生后才救火。"
    }
  ]
}
