import type { LessonGuide } from "../types"
import type { QuizQuestion } from "@/lib/types"

export const week11Guides: Record<string, LessonGuide> = {
    "inv-w11-1": {
        lessonId: "inv-w11-1",
        background: [
            "【ROE 定义】净资产收益率（Return on Equity）= 净利润 / 平均股东权益，衡量股东投入资本的回报率，是最重要的盈利指标。",
            "【ROA 定义】总资产收益率（Return on Assets）= 净利润 / 平均总资产，衡量公司利用全部资产创造利润的效率。",
            "【杜邦分析】将 ROE 分解为三个驱动因素：净利率 × 资产周转率 × 权益乘数，揭示盈利能力、运营效率、财务杠杆的贡献。",
            "【利润率指标】毛利率反映产品盈利能力，营业利润率反映核心业务盈利，净利率反映最终盈利水平。",
            "【周转率指标】资产周转率 = 收入 / 平均总资产，反映资产利用效率。存货周转率、应收账款周转率也是重要指标。",
        ],
        keyDifficulties: [
            "【高 ROE 的陷阱】高 ROE 可能来自高杠杆而非高盈利能力。杜邦分析可以识别 ROE 的真正来源。",
            "【行业可比性】不同行业的财务比率差异很大。零售业周转率高但利润率低，软件业则相反。应与同行业比较。",
            "【一次性因素影响】一次性收益或损失会扭曲当期比率。应使用调整后的核心利润进行分析。",
            "【平均值 vs 期末值】ROE、ROA 应使用平均权益/资产（期初+期末÷2），避免期末值的偶然波动影响。",
        ],
        handsOnPath: [
            "选择一家上市公司，收集近三年财务数据",
            "计算 ROE、ROA、毛利率、营业利润率、净利率",
            "进行杜邦分析：分解 ROE 的三个驱动因素",
            "计算资产周转率、存货周转率、应收账款周转率",
            "分析各项比率的变化趋势",
            "与同行业 2-3 家公司进行对比",
            "识别该公司的优势和劣势",
        ],
        selfCheck: [
            "ROE 和 ROA 的计算公式是什么？",
            "杜邦分析如何分解 ROE？",
            "高 ROE 一定代表公司质量好吗？",
            "如何判断一家公司的运营效率？",
            "为什么要与同行业公司比较财务比率？",
            "你能完成一家公司的杜邦分析吗？",
        ],
        extensions: [
            "学习 ROIC（投入资本回报率）的计算和意义",
            "了解经济增加值（EVA）的概念",
            "研究不同行业的典型财务比率特征",
            "探索财务比率的历史趋势分析",
        ],
        sourceUrls: [
            "https://www.investopedia.com/terms/r/returnonequity.asp",
            "https://www.investopedia.com/terms/r/returnonassets.asp",
            "https://www.investopedia.com/terms/d/dupontanalysis.asp",
        ],
    },
    "inv-w11-2": {
        lessonId: "inv-w11-2",
        background: [
            "【市盈率 P/E】市盈率 = 股价 / 每股收益，反映投资者愿意为每元盈利支付多少价格。是最常用的估值指标。",
            "【市净率 P/B】市净率 = 股价 / 每股净资产，反映股价相对于账面价值的溢价程度。适用于重资产行业。",
            "【市销率 P/S】市销率 = 股价 / 每股销售额，适用于尚未盈利的成长型公司估值。",
            "【EV/EBITDA】企业价值与息税折旧摊销前利润的比值，考虑了债务因素，便于不同资本结构公司的比较。",
            "【PEG 比率】PEG = P/E ÷ 盈利增长率，结合估值和成长性。PEG < 1 通常被认为估值合理。",
        ],
        keyDifficulties: [
            "【盈利的周期性】周期性行业（如钢铁、航运）利润波动大，峰值时 P/E 低谷值时 P/E 高，容易误判。",
            "【会计政策影响】不同会计政策会影响 EPS，导致 P/E 失真。应关注现金流相关的估值指标。",
            "【成长股估值困境】高成长公司 P/E 很高，传统估值方法可能不适用，需要评估增长的持续性和质量。",
            "【相对估值的局限】P/E 等相对估值假设可比公司合理定价，若整个行业泡沫则会误导。",
        ],
        handsOnPath: [
            "选择一个行业，收集 5-10 家公司的估值数据",
            "计算每家公司的 P/E、P/B、P/S、EV/EBITDA",
            "对比各公司的估值水平，找出相对高估和低估的",
            "分析估值差异的原因（增长率、盈利质量、风险）",
            "计算 PEG 比率，评估成长性与估值的匹配度",
            "追踪一只股票的历史 P/E 区间",
            "结合财务分析形成投资判断",
        ],
        selfCheck: [
            "P/E 比率的计算公式是什么？",
            "P/B 比率适用于哪类公司？",
            "为什么周期股在利润高峰时 P/E 反而低？",
            "EV/EBITDA 相比 P/E 有什么优势？",
            "PEG = 1 意味着什么？",
            "你能判断一只股票是否被高估吗？",
        ],
        extensions: [
            "学习相对估值和绝对估值的区别",
            "了解历史 P/E 区间分析方法",
            "研究不同行业的估值特点",
            "探索估值与市场情绪的关系",
        ],
        sourceUrls: [
            "https://www.investopedia.com/terms/p/price-earningsratio.asp",
            "https://www.investopedia.com/terms/p/price-to-bookratio.asp",
            "https://www.investopedia.com/terms/e/ev-ebitda.asp",
        ],
    },
    "inv-w11-3": {
        lessonId: "inv-w11-3",
        background: [
            "【流动比率】流动比率 = 流动资产 / 流动负债，衡量短期偿债能力。一般认为 > 1.5 较为安全。",
            "【速动比率】速动比率 = (流动资产 - 存货) / 流动负债，剔除变现较慢的存货后的短期偿债能力。",
            "【资产负债率】资产负债率 = 总负债 / 总资产，衡量财务杠杆水平。行业不同，合理水平也不同。",
            "【利息覆盖率】利息覆盖率 = 息税前利润(EBIT) / 利息支出，衡量公司支付利息的能力。> 3 较为安全。",
            "【债务权益比】债务权益比 = 总负债 / 股东权益，衡量债务相对于权益的比例，反映财务风险。",
        ],
        keyDifficulties: [
            "【行业差异】不同行业合理的负债水平不同。公用事业通常高负债，科技公司通常低负债。",
            "【隐性负债】表外负债如经营租赁、担保可能未完全反映在资产负债率中，需关注附注披露。",
            "【短期 vs 长期偿债】流动比率反映短期偿债能力，资产负债率反映长期财务结构，两者都要关注。",
            "【利息覆盖的稳定性】应分析多期利息覆盖率的稳定性，而非只看某一期。周期性公司波动较大。",
        ],
        handsOnPath: [
            "选择一家公司，计算流动比率和速动比率",
            "分析流动资产的构成（现金、应收、存货占比）",
            "计算资产负债率和债务权益比",
            "计算利息覆盖率",
            "分析这些指标近 3-5 年的变化趋势",
            "与行业平均水平进行对比",
            "评估公司的财务风险水平",
        ],
        selfCheck: [
            "流动比率和速动比率有什么区别？",
            "为什么速动比率要剔除存货？",
            "利息覆盖率低于 1 意味着什么？",
            "高资产负债率一定不好吗？",
            "你能评估一家公司的偿债风险吗？",
            "哪些行业通常有较高的负债水平？",
        ],
        extensions: [
            "学习现金比率的计算和意义",
            "了解债务契约条款的常见指标",
            "研究信用评级机构的分析方法",
            "探索财务困境预测模型（如 Altman Z-Score）",
        ],
        sourceUrls: [
            "https://www.investopedia.com/terms/c/currentratio.asp",
            "https://www.investopedia.com/terms/q/quickratio.asp",
            "https://www.investopedia.com/terms/d/debtratio.asp",
        ],
    },
}

export const week11Quizzes: Record<string, QuizQuestion[]> = {
    "inv-w11-1": [
        {
            id: "inv-w11-1-q1",
            question: "ROE（净资产收益率）的计算公式是什么？",
            options: [
                "净利润 / 总资产",
                "净利润 / 股东权益",
                "收入 / 总资产",
                "毛利润 / 净资产",
            ],
            answer: 1,
            rationale: "ROE = 净利润 / 股东权益（通常使用平均值），衡量股东投入资本获得的回报。",
        },
        {
            id: "inv-w11-1-q2",
            question: "杜邦分析将 ROE 分解为哪三个因素？",
            options: [
                "收入、成本、费用",
                "资产、负债、权益",
                "净利率、资产周转率、权益乘数",
                "毛利率、税率、利率",
            ],
            answer: 2,
            rationale: "杜邦分析：ROE = 净利率 × 资产周转率 × 权益乘数，分别反映盈利能力、运营效率、财务杠杆。",
        },
        {
            id: "inv-w11-1-q3",
            question: "高 ROE 可能来自哪些因素？",
            options: [
                "只能来自高利润率",
                "高利润率、高周转率或高杠杆",
                "只能来自低成本",
                "只能来自高收入",
            ],
            answer: 1,
            rationale: "根据杜邦分析，高 ROE 可以来自高净利率、高资产周转率或高财务杠杆，需要区分来源判断质量。",
        },
        {
            id: "inv-w11-1-q4",
            question: "资产周转率衡量的是什么？",
            options: [
                "盈利能力",
                "偿债能力",
                "资产利用效率",
                "财务杠杆",
            ],
            answer: 2,
            rationale: "资产周转率 = 收入 / 总资产，衡量公司利用资产创造收入的效率。周转率越高，资产利用越充分。",
        },
        {
            id: "inv-w11-1-q5",
            question: "ROA 和 ROE 的主要区别是什么？",
            options: [
                "没有区别",
                "ROA 衡量全部资产回报，ROE 只衡量股东权益回报",
                "ROA 只用于银行业",
                "ROE 不考虑利润",
            ],
            answer: 1,
            rationale: "ROA 使用总资产作为分母，衡量全部资产的回报；ROE 使用股东权益，只衡量股东投入的回报。",
        },
        {
            id: "inv-w11-1-q6",
            question: "为什么要与同行业公司比较财务比率？",
            options: [
                "没有必要比较",
                "不同行业财务结构差异大，跨行业比较没有意义",
                "法律要求",
                "为了计算平均值",
            ],
            answer: 1,
            rationale: "不同行业的商业模式、资产结构、盈利模式差异很大，财务比率只有与同行业比较才有意义。",
        },
        {
            id: "inv-w11-1-q7",
            question: "权益乘数反映的是什么？",
            options: [
                "盈利能力",
                "运营效率",
                "财务杠杆水平",
                "成长性",
            ],
            answer: 2,
            rationale: "权益乘数 = 总资产 / 股东权益，反映公司使用债务融资的程度，即财务杠杆水平。",
        },
        {
            id: "inv-w11-1-q8",
            question: "毛利率的计算公式是什么？",
            options: [
                "净利润 / 收入",
                "（收入 - 营业成本）/ 收入",
                "营业利润 / 收入",
                "收入 / 总资产",
            ],
            answer: 1,
            rationale: "毛利率 = 毛利润 / 收入 = (收入 - 营业成本) / 收入，反映产品的基本盈利能力。",
        },
        {
            id: "inv-w11-1-q9",
            question: "存货周转率低可能意味着什么？",
            options: [
                "销售非常好",
                "存货积压，可能存在滞销或过时风险",
                "公司现金充裕",
                "毛利率很高",
            ],
            answer: 1,
            rationale: "存货周转率低表示存货销售较慢，可能存在积压、滞销或产品过时的风险，需要关注存货减值。",
        },
        {
            id: "inv-w11-1-q10",
            question: "计算 ROE 时为什么建议使用平均股东权益？",
            options: [
                "没有区别",
                "避免期末值的偶然波动影响，更能反映全年情况",
                "会计准则要求",
                "计算更简单",
            ],
            answer: 1,
            rationale: "使用平均值（期初+期末÷2）可以避免年末一次性变动的影响，更准确地反映全年的资本使用效率。",
        },
        {
            id: "inv-w11-1-q11",
            question: "应收账款周转率下降可能意味着什么？",
            options: [
                "销售增长加快",
                "收款速度变慢，可能存在回款问题",
                "公司盈利能力增强",
                "产品竞争力提升",
            ],
            answer: 1,
            rationale: "应收账款周转率下降表示应收账款回收速度变慢，可能暗示客户付款困难或信用政策过松。",
        },
        {
            id: "inv-w11-1-q12",
            question: "一家公司 ROE = 20%，通过杜邦分析发现主要来自高杠杆，这意味着什么？",
            options: [
                "公司经营非常优秀",
                "高 ROE 依赖债务融资，财务风险较高",
                "公司产品竞争力强",
                "公司成长性好",
            ],
            answer: 1,
            rationale: "如果高 ROE 主要来自高权益乘数（高杠杆），说明公司依赖债务提升回报，财务风险较高，需谨慎评估。",
        },
    ],
    "inv-w11-2": [
        {
            id: "inv-w11-2-q1",
            question: "市盈率（P/E）的计算公式是什么？",
            options: [
                "每股收益 / 股价",
                "股价 / 每股收益",
                "股价 / 每股净资产",
                "净利润 / 股价",
            ],
            answer: 1,
            rationale: "P/E = 股价 / 每股收益（EPS），反映投资者愿意为每元盈利支付多少价格。",
        },
        {
            id: "inv-w11-2-q2",
            question: "P/B 比率适用于哪类公司的估值？",
            options: [
                "高科技公司",
                "银行、保险等重资产行业",
                "互联网公司",
                "初创公司",
            ],
            answer: 1,
            rationale: "P/B 比较股价和账面净资产，对于银行、保险等资产价值重要的行业更有参考意义。",
        },
        {
            id: "inv-w11-2-q3",
            question: "为什么周期性行业在利润高峰时 P/E 反而可能较低？",
            options: [
                "股价下跌",
                "高峰期盈利高但投资者预期未来下降",
                "计算错误",
                "会计政策变化",
            ],
            answer: 1,
            rationale: "周期高峰时盈利高使分母大，但投资者预期利润将下降不愿给高估值，导致 P/E 较低。低谷时相反。",
        },
        {
            id: "inv-w11-2-q4",
            question: "EV/EBITDA 中的 EV 是什么？",
            options: [
                "每股收益",
                "企业价值（市值 + 净债务）",
                "净资产",
                "经营现金流",
            ],
            answer: 1,
            rationale: "EV = Enterprise Value = 市值 + 债务 - 现金，代表收购整个公司需要支付的价格。",
        },
        {
            id: "inv-w11-2-q5",
            question: "PEG 比率的计算公式是什么？",
            options: [
                "P/E × 增长率",
                "P/E ÷ 盈利增长率",
                "股价 ÷ 增长率",
                "增长率 ÷ P/E",
            ],
            answer: 1,
            rationale: "PEG = P/E ÷ 盈利增长率（%），将估值与成长性结合。PEG < 1 通常被认为估值合理。",
        },
        {
            id: "inv-w11-2-q6",
            question: "P/S 比率适用于什么情况？",
            options: [
                "只适用于大公司",
                "适用于尚未盈利但有收入的公司",
                "只适用于银行业",
                "只适用于高分红公司",
            ],
            answer: 1,
            rationale: "P/S = 股价 / 每股销售额，当公司尚未盈利时 P/E 无法计算，P/S 可以作为替代估值指标。",
        },
        {
            id: "inv-w11-2-q7",
            question: "P/E = 20 意味着什么？",
            options: [
                "公司价值 20 元",
                "投资者愿意为每 1 元盈利支付 20 元",
                "公司负债 20 元",
                "每股收益 20 元",
            ],
            answer: 1,
            rationale: "P/E = 20 意味着投资者愿意为每 1 元的年度盈利支付 20 元，或者说需要 20 年的盈利才能收回投资（假设盈利不变）。",
        },
        {
            id: "inv-w11-2-q8",
            question: "相对估值法的主要局限是什么？",
            options: [
                "计算太复杂",
                "假设可比公司合理定价，若整个行业泡沫则会误导",
                "不能用于上市公司",
                "只适用于中国市场",
            ],
            answer: 1,
            rationale: "相对估值依赖可比公司作为基准，如果整个行业都被高估，用 P/E 比较会得出错误结论。",
        },
        {
            id: "inv-w11-2-q9",
            question: "EV/EBITDA 相比 P/E 有什么优势？",
            options: [
                "计算更简单",
                "考虑了债务因素，便于不同资本结构公司比较",
                "只看利润",
                "不需要财务数据",
            ],
            answer: 1,
            rationale: "EV/EBITDA 在企业价值层面估值，考虑了债务，并且 EBITDA 排除了折旧摊销和利息的影响，便于跨公司比较。",
        },
        {
            id: "inv-w11-2-q10",
            question: "一只股票历史 P/E 区间是 10-25，目前 P/E 是 28，可能意味着什么？",
            options: [
                "一定被高估",
                "相对历史水平偏高，但需结合基本面变化判断",
                "估值合理",
                "应该立即买入",
            ],
            answer: 1,
            rationale: "高于历史区间可能意味着估值偏高，但也可能是基本面改善（增长加速、质量提升）导致的合理重估。",
        },
        {
            id: "inv-w11-2-q11",
            question: "Trailing P/E 和 Forward P/E 有什么区别？",
            options: [
                "没有区别",
                "Trailing 使用过去盈利，Forward 使用预测盈利",
                "Trailing 更准确",
                "Forward 不能使用",
            ],
            answer: 1,
            rationale: "Trailing P/E 使用过去 12 个月实际盈利，Forward P/E 使用未来 12 个月预测盈利。后者反映市场预期。",
        },
        {
            id: "inv-w11-2-q12",
            question: "高 P/E 公司是否一定比低 P/E 公司贵？",
            options: [
                "是的，高 P/E 一定更贵",
                "不一定，高增长公司可能值得更高 P/E",
                "低 P/E 一定便宜",
                "P/E 高低无所谓",
            ],
            answer: 1,
            rationale: "高 P/E 可能反映高增长预期。如果增长能够兑现，高 P/E 可能合理；如果增长不及预期，才是真正的贵。",
        },
    ],
    "inv-w11-3": [
        {
            id: "inv-w11-3-q1",
            question: "流动比率的计算公式是什么？",
            options: [
                "流动负债 / 流动资产",
                "流动资产 / 流动负债",
                "流动资产 / 总负债",
                "现金 / 流动负债",
            ],
            answer: 1,
            rationale: "流动比率 = 流动资产 / 流动负债，衡量公司用流动资产偿还流动负债的能力。",
        },
        {
            id: "inv-w11-3-q2",
            question: "速动比率为什么要剔除存货？",
            options: [
                "存货价值太高",
                "存货变现速度较慢，不如现金和应收账款流动性强",
                "存货不属于资产",
                "会计准则要求",
            ],
            answer: 1,
            rationale: "存货需要经过销售才能变现，变现速度较慢且可能存在减值风险，剔除后更能反映快速偿债能力。",
        },
        {
            id: "inv-w11-3-q3",
            question: "利息覆盖率低于 1 意味着什么？",
            options: [
                "公司利润很高",
                "公司的营业利润不足以支付利息费用",
                "公司没有债务",
                "公司现金充裕",
            ],
            answer: 1,
            rationale: "利息覆盖率 < 1 意味着 EBIT 小于利息支出，公司核心业务盈利不足以支付债务利息，财务风险很高。",
        },
        {
            id: "inv-w11-3-q4",
            question: "高资产负债率一定是坏事吗？",
            options: [
                "是的，说明公司快要破产",
                "不一定，某些行业如公用事业通常高负债但风险可控",
                "负债率越高越好",
                "与行业无关",
            ],
            answer: 1,
            rationale: "不同行业合理负债水平不同。公用事业现金流稳定可以承受更高负债，科技公司则通常低负债。需与行业比较。",
        },
        {
            id: "inv-w11-3-q5",
            question: "流动比率为 2 意味着什么？",
            options: [
                "公司将破产",
                "流动资产是流动负债的 2 倍",
                "公司没有流动资产",
                "公司债务很高",
            ],
            answer: 1,
            rationale: "流动比率 = 2 意味着流动资产是流动负债的 2 倍，短期偿债能力较强。",
        },
        {
            id: "inv-w11-3-q6",
            question: "债务权益比的计算公式是什么？",
            options: [
                "总资产 / 股东权益",
                "总负债 / 股东权益",
                "股东权益 / 总负债",
                "流动负债 / 流动资产",
            ],
            answer: 1,
            rationale: "债务权益比 = 总负债 / 股东权益，衡量债务相对于股东投入的比例，反映财务杠杆。",
        },
        {
            id: "inv-w11-3-q7",
            question: "利息覆盖率的计算公式是什么？",
            options: [
                "净利润 / 利息支出",
                "息税前利润(EBIT) / 利息支出",
                "经营现金流 / 利息支出",
                "收入 / 利息支出",
            ],
            answer: 1,
            rationale: "利息覆盖率 = EBIT / 利息支出，衡量公司用经营利润支付利息的能力。一般 > 3 较为安全。",
        },
        {
            id: "inv-w11-3-q8",
            question: "分析偿债能力时为什么要关注表外负债？",
            options: [
                "表外负债不重要",
                "表外负债未在资产负债率中体现但确实存在义务",
                "表外负债很少见",
                "会计准则不允许表外负债",
            ],
            answer: 1,
            rationale: "表外负债（如某些租赁、担保）未反映在资产负债表上但公司有实际义务，会低估真实负债水平。",
        },
        {
            id: "inv-w11-3-q9",
            question: "速动比率的公式是什么？",
            options: [
                "流动资产 / 流动负债",
                "(流动资产 - 存货) / 流动负债",
                "现金 / 总负债",
                "速动资产 / 总负债",
            ],
            answer: 1,
            rationale: "速动比率 = (流动资产 - 存货) / 流动负债，也称酸性测试比率，衡量快速变现资产的偿债能力。",
        },
        {
            id: "inv-w11-3-q10",
            question: "Altman Z-Score 是用来预测什么的？",
            options: [
                "股价走势",
                "公司破产风险",
                "盈利增长",
                "市场情绪",
            ],
            answer: 1,
            rationale: "Altman Z-Score 是一个综合多项财务指标的模型，用于预测公司财务困境和破产风险。",
        },
        {
            id: "inv-w11-3-q11",
            question: "一家公司流动比率高但速动比率低，可能意味着什么？",
            options: [
                "公司财务非常健康",
                "流动资产中存货占比很高",
                "公司没有存货",
                "两个比率一定相等",
            ],
            answer: 1,
            rationale: "两者差异大说明流动资产中存货占比高。如果存货周转慢或有减值风险，实际短期偿债能力可能不如流动比率显示的那么强。",
        },
        {
            id: "inv-w11-3-q12",
            question: "为什么要分析多期利息覆盖率的稳定性？",
            options: [
                "单期数据就足够",
                "周期性公司利润波动大，单期可能不代表常态",
                "利息覆盖率不会变化",
                "债权人不关心稳定性",
            ],
            answer: 1,
            rationale: "周期性公司利润波动大，某一期的高覆盖率可能只是周期高峰。应分析多期数据确保偿债能力稳定。",
        },
    ],
}
