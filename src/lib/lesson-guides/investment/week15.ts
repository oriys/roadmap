import type { LessonGuide } from "../types"
import type { QuizQuestion } from "@/lib/types"

export const week15Guides: Record<string, LessonGuide> = {
    "inv-w15-1": {
        lessonId: "inv-w15-1",
        background: [
            "【K 线形态意义】K 线形态是市场参与者心理的可视化呈现，特定形态在特定位置出现可能预示价格变化。",
            "【锤子线】长下影线、小实体、很少或没有上影线。在下跌后出现可能预示反转。下影线越长信号越强。",
            "【上吊线】形状与锤子线相同，但出现在上涨后。可能预示上涨趋势结束，需要确认。",
            "【吞没形态】大实体 K 线完全吞没前一根 K 线的实体。看涨吞没：阳线吞没阴线；看跌吞没：阴线吞没阳线。",
            "【十字星】开盘价与收盘价接近，形成十字形状。表示市场犹豫不决，在关键位置可能预示反转。",
        ],
        keyDifficulties: [
            "【位置重要性】同样的形态在不同位置意义不同。锤子线在下跌底部有意义，在上涨途中意义不大。",
            "【确认的必要性】单根 K 线形态需要后续确认。如锤子线后应有阳线跟进确认反转。",
            "【时间周期影响】周线级别的 K 线形态比日线更可靠。日内形态噪音更多。",
            "【避免过度解读】不是每个 K 线形态都有意义。应关注明显的形态和关键位置的形态。",
        ],
        handsOnPath: [
            "学习识别基本的 K 线形态图谱",
            "在图表中寻找锤子线和上吊线",
            "识别吞没形态并观察后续走势",
            "找出重要位置的十字星",
            "比较日线和周线形态的差异",
            "记录形态出现后的实际走势",
            "统计各种形态的成功率",
        ],
        selfCheck: [
            "锤子线的特征是什么？",
            "上吊线与锤子线有什么区别？",
            "什么是看涨吞没形态？",
            "十字星代表什么市场情绪？",
            "为什么 K 线形态需要确认？",
            "你能识别图表中的基本 K 线形态吗？",
        ],
        extensions: [
            "学习早晨之星和黄昏之星形态",
            "了解三白兵和三乌鸦形态",
            "研究刺透形态和乌云盖顶",
            "探索 K 线形态的量化测试",
        ],
        sourceUrls: [
            "https://www.investopedia.com/articles/active-trading/062315/using-bullish-candlestick-patterns-buy-stocks.asp",
            "https://www.ig.com/en/trading-strategies/16-candlestick-patterns-every-trader-should-know-180615",
            "https://chartschool.stockcharts.com/table-of-contents/chart-analysis/candlestick-charts",
        ],
    },
    "inv-w15-2": {
        lessonId: "inv-w15-2",
        background: [
            "【反转形态定义】反转形态出现在趋势末期，预示当前趋势可能结束并反向发展。需要有前期趋势存在。",
            "【头肩顶】三个峰，中间最高（头），两侧较低（肩）。颈线连接两个低点，跌破颈线确认反转。",
            "【头肩底】与头肩顶相反，三个底中间最低。突破颈线确认向上反转。是最可靠的底部反转形态之一。",
            "【双顶双底】双顶（M 顶）：两个高度相近的高点。双底（W 底）：两个高度相近的低点。突破颈线确认。",
            "【圆弧顶底】价格缓慢转向形成圆弧。形成时间长，反转也是渐进的。是较少见但可靠的形态。",
        ],
        keyDifficulties: [
            "【前期趋势要求】反转形态必须有前期趋势。没有上涨趋势就没有顶部反转，没有下跌趋势就没有底部反转。",
            "【颈线突破确认】头肩形态和双顶双底都需要颈线突破确认。未突破前形态不算完成。",
            "【假突破风险】颈线可能被假突破后返回。建议等待收盘确认或设置过滤规则。",
            "【目标价计算】形态的目标价通常是形态高度。如头肩顶目标价 = 颈线 - (头部到颈线的距离)。",
        ],
        handsOnPath: [
            "学习头肩顶和头肩底的标准形态",
            "在历史图表中寻找头肩形态的例子",
            "画出颈线并计算目标价",
            "识别双顶和双底形态",
            "观察颈线突破后的价格走势",
            "比较形态完成前后的成交量变化",
            "记录反转形态的成功率",
        ],
        selfCheck: [
            "头肩顶的结构是怎样的？",
            "什么是颈线？如何画？",
            "反转形态为什么需要前期趋势？",
            "如何计算头肩形态的目标价？",
            "双顶和双底各自预示什么？",
            "你能在图表中识别反转形态吗？",
        ],
        extensions: [
            "学习三重顶和三重底形态",
            "了解楔形反转形态",
            "研究岛型反转形态",
            "探索形态识别的量化方法",
        ],
        sourceUrls: [
            "https://www.investopedia.com/terms/h/head-shoulders.asp",
            "https://www.investopedia.com/terms/d/doubletop.asp",
            "https://chartschool.stockcharts.com/table-of-contents/chart-analysis/chart-patterns",
        ],
    },
    "inv-w15-3": {
        lessonId: "inv-w15-3",
        background: [
            "【持续形态定义】持续形态出现在趋势中途，表示价格暂时整理后可能继续原趋势方向运动。",
            "【三角形】价格波动收窄形成三角形。对称三角形：方向不确定；上升三角形：看涨；下降三角形：看跌。",
            "【旗形】短期急速运动后的平行四边形整理区间。上涨后的旗形整理通常继续上涨。",
            "【楔形】与旗形类似但两条边线趋于汇合。上升楔形通常看跌，下降楔形通常看涨（与直觉相反）。",
            "【矩形】价格在水平区间内波动，形成矩形整理区间。突破方向即为后续方向。",
        ],
        keyDifficulties: [
            "【突破方向判断】虽然持续形态倾向于按原趋势方向突破，但也可能反向突破。需等待确认。",
            "【三角形的时间限制】三角形应在约 2/3 处完成突破。如果一直延续到顶点，形态可能失效。",
            "【楔形的反直觉性】上升楔形通常向下突破（看跌），下降楔形通常向上突破（看涨），容易搞混。",
            "【目标价计算】三角形目标价 = 突破点 + 三角形最宽处的高度。旗形目标价 = 旗杆的长度。",
        ],
        handsOnPath: [
            "学习识别对称、上升、下降三角形",
            "在图表中寻找三角形整理形态",
            "画出三角形的边界线",
            "识别旗形和楔形形态",
            "观察突破后的价格走势",
            "计算形态的目标价位",
            "记录不同形态的突破成功率",
        ],
        selfCheck: [
            "三种三角形各有什么特点？",
            "上升三角形通常预示什么？",
            "旗形形态的特征是什么？",
            "上升楔形是看涨还是看跌？",
            "如何计算三角形的目标价？",
            "你能区分持续形态和反转形态吗？",
        ],
        extensions: [
            "学习杯柄形态",
            "了解菱形形态",
            "研究扩张三角形",
            "探索艾略特波浪理论中的形态",
        ],
        sourceUrls: [
            "https://www.investopedia.com/terms/t/triangle.asp",
            "https://www.investopedia.com/terms/f/flag.asp",
            "https://chartschool.stockcharts.com/table-of-contents/chart-analysis/chart-patterns/continuation-patterns",
        ],
    },
}

export const week15Quizzes: Record<string, QuizQuestion[]> = {
    "inv-w15-1": [
        {
            id: "inv-w15-1-q1",
            question: "锤子线的特征是什么？",
            options: [
                "长上影线，小实体",
                "长下影线，小实体，很少或没有上影线",
                "大实体，没有影线",
                "开盘价等于收盘价",
            ],
            answer: 1,
            rationale: "锤子线特征：长下影线（至少是实体的 2 倍），小实体，很少或没有上影线。",
        },
        {
            id: "inv-w15-1-q2",
            question: "锤子线在什么位置出现才有意义？",
            options: [
                "任何位置",
                "下跌趋势的底部",
                "上涨趋势中",
                "横盘整理中",
            ],
            answer: 1,
            rationale: "锤子线在下跌趋势的底部出现才有反转意义。在其他位置意义不大。",
        },
        {
            id: "inv-w15-1-q3",
            question: "上吊线与锤子线的区别是什么？",
            options: [
                "形状不同",
                "形状相同，但上吊线出现在上涨后",
                "颜色不同",
                "没有区别",
            ],
            answer: 1,
            rationale: "上吊线与锤子线形状相同，但出现位置不同：锤子线在底部（看涨），上吊线在顶部（看跌）。",
        },
        {
            id: "inv-w15-1-q4",
            question: "什么是看涨吞没形态？",
            options: [
                "阴线吞没阳线",
                "阳线吞没前一根阴线",
                "两根同样大小的 K 线",
                "一根十字星",
            ],
            answer: 1,
            rationale: "看涨吞没：在下跌后，大阳线的实体完全吞没前一根阴线的实体，预示可能反转向上。",
        },
        {
            id: "inv-w15-1-q5",
            question: "十字星 K 线表示什么市场情绪？",
            options: [
                "强烈看涨",
                "强烈看跌",
                "市场犹豫不决",
                "趋势将加速",
            ],
            answer: 2,
            rationale: "十字星开盘价接近收盘价，表示多空双方势均力敌，市场犹豫不决，在关键位置可能预示反转。",
        },
        {
            id: "inv-w15-1-q6",
            question: "为什么 K 线形态需要后续确认？",
            options: [
                "不需要确认",
                "单根 K 线信号不够可靠，需要后续走势验证",
                "只是习惯问题",
                "所有形态都 100% 准确",
            ],
            answer: 1,
            rationale: "单根 K 线形态可能是随机波动。需要后续 K 线确认（如锤子线后出现阳线），提高判断准确性。",
        },
        {
            id: "inv-w15-1-q7",
            question: "周线级别的 K 线形态与日线相比怎样？",
            options: [
                "意义相同",
                "周线形态更可靠",
                "日线形态更可靠",
                "只看分钟线",
            ],
            answer: 1,
            rationale: "周线级别的 K 线形态包含更多交易信息，过滤了短期噪音，通常比日线形态更可靠。",
        },
        {
            id: "inv-w15-1-q8",
            question: "早晨之星是什么类型的形态？",
            options: [
                "看跌反转形态",
                "看涨反转形态",
                "持续形态",
                "中性形态",
            ],
            answer: 1,
            rationale: "早晨之星是由三根 K 线组成的看涨反转形态：大阴线 + 小实体（或十字星）+ 大阳线。",
        },
        {
            id: "inv-w15-1-q9",
            question: "看跌吞没形态应该出现在哪里？",
            options: [
                "下跌趋势的底部",
                "上涨趋势的顶部",
                "任何位置",
                "横盘整理中间",
            ],
            answer: 1,
            rationale: "看跌吞没（大阴线吞没阳线）应该出现在上涨趋势的顶部才有反转意义。",
        },
        {
            id: "inv-w15-1-q10",
            question: "黄昏之星与早晨之星的关系是什么？",
            options: [
                "完全相同",
                "形状相反，黄昏之星是看跌反转形态",
                "只是颜色不同",
                "没有关系",
            ],
            answer: 1,
            rationale: "黄昏之星与早晨之星相反，出现在顶部，由大阳线 + 小实体 + 大阴线组成，是看跌反转形态。",
        },
        {
            id: "inv-w15-1-q11",
            question: "分析 K 线形态时为什么不应该过度解读？",
            options: [
                "K 线不重要",
                "应关注明显形态和关键位置，避免分析瘫痪",
                "所有形态都有意义",
                "只看价格就好",
            ],
            answer: 1,
            rationale: "不是每个 K 线形态都有意义。应专注于明显的形态和出现在关键位置（支撑阻力、趋势转折）的形态。",
        },
        {
            id: "inv-w15-1-q12",
            question: "锤子线的下影线越长意味着什么？",
            options: [
                "信号越弱",
                "信号越强",
                "与影线长度无关",
                "应该忽略",
            ],
            answer: 1,
            rationale: "锤子线的下影线越长，表示价格曾大幅下跌但被买盘拉回，买方力量越强，反转信号越强。",
        },
    ],
    "inv-w15-2": [
        {
            id: "inv-w15-2-q1",
            question: "头肩顶形态的结构是怎样的？",
            options: [
                "两个相同高度的峰",
                "三个峰，中间最高（头），两侧较低（肩）",
                "三个相同高度的峰",
                "一个高峰",
            ],
            answer: 1,
            rationale: "头肩顶由三个峰组成：左肩、头部（最高）、右肩，颈线连接两个低点。",
        },
        {
            id: "inv-w15-2-q2",
            question: "头肩形态何时算确认？",
            options: [
                "头部形成时",
                "颈线被突破时",
                "右肩形成时",
                "左肩形成时",
            ],
            answer: 1,
            rationale: "头肩形态在颈线被突破（头肩顶跌破颈线，头肩底突破颈线）时才算确认完成。",
        },
        {
            id: "inv-w15-2-q3",
            question: "双顶形态（M 顶）预示什么？",
            options: [
                "继续上涨",
                "可能的顶部反转，价格下跌",
                "横盘整理",
                "加速上涨",
            ],
            answer: 1,
            rationale: "双顶（M 顶）是顶部反转形态，两个高度相近的高点形成 M 形状，跌破颈线确认反转向下。",
        },
        {
            id: "inv-w15-2-q4",
            question: "反转形态为什么需要前期趋势？",
            options: [
                "这是随意的规定",
                "没有趋势就无所谓反转",
                "前期趋势不重要",
                "只是为了美观",
            ],
            answer: 1,
            rationale: "反转形态的定义就是结束当前趋势。没有上涨趋势就没有顶部反转，没有下跌趋势就没有底部反转。",
        },
        {
            id: "inv-w15-2-q5",
            question: "头肩顶的目标价如何计算？",
            options: [
                "随意估计",
                "目标价 = 颈线 - (头部到颈线的距离)",
                "目标价 = 头部价格",
                "无法计算",
            ],
            answer: 1,
            rationale: "头肩顶目标价 = 颈线价格 - 形态高度（头部到颈线的距离）。这是最低预期下跌幅度。",
        },
        {
            id: "inv-w15-2-q6",
            question: "双底形态（W 底）预示什么？",
            options: [
                "继续下跌",
                "可能的底部反转，价格上涨",
                "横盘整理",
                "加速下跌",
            ],
            answer: 1,
            rationale: "双底（W 底）是底部反转形态，两个高度相近的低点形成 W 形状，突破颈线确认反转向上。",
        },
        {
            id: "inv-w15-2-q7",
            question: "什么是颈线？",
            options: [
                "头肩形态中头部的位置",
                "连接形态中两个低点（或高点）的支撑/阻力线",
                "K 线的实体",
                "移动平均线",
            ],
            answer: 1,
            rationale: "颈线是连接形态中关键点的线：头肩顶连接两个低点，头肩底连接两个高点。突破颈线确认形态。",
        },
        {
            id: "inv-w15-2-q8",
            question: "头肩底是什么类型的形态？",
            options: [
                "顶部反转形态",
                "底部反转形态",
                "持续形态",
                "中性形态",
            ],
            answer: 1,
            rationale: "头肩底是底部反转形态，与头肩顶相反，三个底中间最低，突破颈线后预示上涨。",
        },
        {
            id: "inv-w15-2-q9",
            question: "颈线可能被假突破后返回，应该怎么处理？",
            options: [
                "立即交易",
                "等待收盘确认或设置过滤规则",
                "忽略颈线",
                "放弃分析",
            ],
            answer: 1,
            rationale: "为避免假突破，可以等待收盘价确认突破、等待连续突破、或要求突破幅度超过一定比例。",
        },
        {
            id: "inv-w15-2-q10",
            question: "圆弧顶和圆弧底的特点是什么？",
            options: [
                "快速反转",
                "价格缓慢转向，形成时间长",
                "只有一天形成",
                "与成交量无关",
            ],
            answer: 1,
            rationale: "圆弧形态是价格缓慢、渐进转向形成的，形成时间较长，反转也是渐进的而非剧烈的。",
        },
        {
            id: "inv-w15-2-q11",
            question: "反转形态形成过程中成交量应该怎样变化？",
            options: [
                "一直放大",
                "头肩顶中左肩成交量最大，头部次之，右肩最小",
                "成交量不重要",
                "一直缩小",
            ],
            answer: 1,
            rationale: "头肩顶中成交量通常递减：左肩最大，头部次之，右肩最小。突破颈线时成交量应放大。",
        },
        {
            id: "inv-w15-2-q12",
            question: "三重顶与头肩顶的区别是什么？",
            options: [
                "没有区别",
                "三重顶三个峰高度相近，头肩顶中间峰最高",
                "三重顶只有两个峰",
                "头肩顶三个峰高度相近",
            ],
            answer: 1,
            rationale: "三重顶的三个峰高度相近，而头肩顶中间的「头」明显高于两侧的「肩」。",
        },
    ],
    "inv-w15-3": [
        {
            id: "inv-w15-3-q1",
            question: "持续形态预示什么？",
            options: [
                "趋势反转",
                "暂时整理后继续原趋势方向",
                "趋势结束",
                "方向不确定",
            ],
            answer: 1,
            rationale: "持续形态出现在趋势中途，表示价格暂时整理休息，之后倾向于继续原趋势方向运动。",
        },
        {
            id: "inv-w15-3-q2",
            question: "上升三角形通常预示什么？",
            options: [
                "下跌",
                "向上突破（看涨）",
                "横盘",
                "无法预测",
            ],
            answer: 1,
            rationale: "上升三角形有水平的阻力线和上升的支撑线，买方力量逐渐增强，通常向上突破。",
        },
        {
            id: "inv-w15-3-q3",
            question: "下降三角形通常预示什么？",
            options: [
                "上涨",
                "向下突破（看跌）",
                "横盘",
                "继续三角形",
            ],
            answer: 1,
            rationale: "下降三角形有水平的支撑线和下降的阻力线，卖方力量逐渐增强，通常向下突破。",
        },
        {
            id: "inv-w15-3-q4",
            question: "对称三角形的突破方向是？",
            options: [
                "一定向上",
                "一定向下",
                "方向不确定，需要等待突破",
                "不会突破",
            ],
            answer: 2,
            rationale: "对称三角形多空力量均衡，突破方向不确定。通常倾向于按原趋势方向突破，但需要等待确认。",
        },
        {
            id: "inv-w15-3-q5",
            question: "旗形形态的特征是什么？",
            options: [
                "水平的矩形",
                "急速运动后的平行四边形整理区间",
                "三角形整理",
                "圆弧形态",
            ],
            answer: 1,
            rationale: "旗形是短期急速运动（旗杆）后形成的倾斜平行四边形整理区间（旗面），通常继续原趋势。",
        },
        {
            id: "inv-w15-3-q6",
            question: "上升楔形通常是什么信号？",
            options: [
                "看涨信号",
                "看跌信号",
                "中性信号",
                "持续上涨",
            ],
            answer: 1,
            rationale: "上升楔形（两条向上收敛的线）通常是看跌信号，会向下突破。这与直觉相反，容易搞混。",
        },
        {
            id: "inv-w15-3-q7",
            question: "三角形应该在哪里完成突破？",
            options: [
                "顶点位置",
                "大约在三角形 2/3 处",
                "起点位置",
                "随时都可以",
            ],
            answer: 1,
            rationale: "三角形通常应在约 2/3 处完成突破。如果一直延续到顶点附近，形态可能失效。",
        },
        {
            id: "inv-w15-3-q8",
            question: "三角形的目标价如何计算？",
            options: [
                "无法计算",
                "突破点 + 三角形最宽处的高度",
                "三角形顶点的价格",
                "起点的价格",
            ],
            answer: 1,
            rationale: "三角形目标价 = 突破点 ± 三角形最宽处（起点）的高度。向上突破则加，向下突破则减。",
        },
        {
            id: "inv-w15-3-q9",
            question: "矩形形态是什么？",
            options: [
                "三角形整理",
                "价格在水平区间内波动的整理区间",
                "圆弧形态",
                "头肩形态",
            ],
            answer: 1,
            rationale: "矩形是价格在水平支撑和阻力之间波动形成的横向整理区间，突破方向即为后续方向。",
        },
        {
            id: "inv-w15-3-q10",
            question: "旗形的目标价如何计算？",
            options: [
                "旗面的高度",
                "旗杆的长度（加到突破点）",
                "无法计算",
                "随机估计",
            ],
            answer: 1,
            rationale: "旗形目标价 = 突破点 + 旗杆长度。旗杆是形成旗形前的急速运动幅度。",
        },
        {
            id: "inv-w15-3-q11",
            question: "下降楔形通常是什么信号？",
            options: [
                "看跌信号",
                "看涨信号",
                "中性信号",
                "持续下跌",
            ],
            answer: 1,
            rationale: "下降楔形（两条向下收敛的线）通常是看涨信号，会向上突破。与上升楔形相反。",
        },
        {
            id: "inv-w15-3-q12",
            question: "持续形态与反转形态的主要区别是什么？",
            options: [
                "形状完全不同",
                "持续形态预示原趋势继续，反转形态预示趋势改变",
                "出现位置相同",
                "没有区别",
            ],
            answer: 1,
            rationale: "持续形态出现在趋势中途，预示暂时休整后继续原方向；反转形态出现在趋势末期，预示方向改变。",
        },
    ],
}
