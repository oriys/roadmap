import type { LessonGuide } from "../types"
import type { QuizQuestion } from "@/lib/types"

export const week7Guides: Record<string, LessonGuide> = {
    "tm-7-1": {
        lessonId: "tm-7-1",
        background: [
            "【技术决策的重要性】技术决策是技术管理者最具影响力的工作之一。一个好的技术决策可以节省数年的开发时间，而一个糟糕的决策可能导致数月的重构工作。决策质量直接影响团队效率和产品成功。",
            "【ADR 方法】Architecture Decision Records（架构决策记录）是记录重要技术决策的标准方法。每个 ADR 包含：标题、状态、上下文、决策、后果。这种格式确保决策过程透明且可追溯。",
            "【决策矩阵】当面对多个技术选项时，决策矩阵是有效工具。列出所有选项，定义评估维度（如性能、成本、学习曲线、社区支持），为每个维度分配权重，然后打分比较。",
            "【可逆性原则】Jeff Bezos 提出 Type 1 和 Type 2 决策框架：Type 1 是不可逆的重大决策，需要谨慎分析；Type 2 是可逆的，应该快速决策并迭代。大多数技术决策是 Type 2。",
            "【共识与承诺】技术决策不需要所有人同意，但需要所有人承诺执行。'Disagree and commit'（不同意但承诺）是健康团队文化的标志。决策后，即使有保留意见的人也应全力支持执行。"
        ],
        keyDifficulties: [
            "【信息不完整】技术决策往往需要在信息不完整的情况下做出。等待完美信息会导致决策瘫痪，但过于草率又会带来风险。关键是识别'足够好'的信息阈值。",
            "【平衡短期与长期】短期最优解往往不是长期最优。选择快速但不可扩展的方案可能在半年后带来技术债务。需要明确权衡并记录决策原因。",
            "【处理分歧】技术团队中常有强烈的技术偏好。作为决策者，需要区分'个人偏好'和'客观优劣'，并能在不伤害团队士气的情况下做出决断。",
            "【避免决策疲劳】并非所有决策都值得同等投入。需要识别哪些决策需要深入分析，哪些可以快速决定或授权给团队。"
        ],
        handsOnPath: [
            "1. 创建 ADR 模板：在项目中建立 docs/adr 目录，创建 ADR 模板和编号规范",
            "2. 记录一个决策：选择一个近期的技术决策，用 ADR 格式记录下来",
            "3. 决策矩阵练习：对当前面临的一个技术选型，建立决策矩阵进行分析",
            "4. 分类当前决策：将团队待做的决策分为 Type 1 和 Type 2，调整相应的决策流程",
            "5. 建立决策原则：为团队制定3-5条技术决策原则，作为快速决策的指导"
        ],
        selfCheck: [
            "你的团队是否有系统性记录技术决策的机制？",
            "最近一个重要技术决策，你能清晰说明选择的原因和权衡吗？",
            "团队成员对决策过程的参与感如何？是否有'被通知'而非'被咨询'的抱怨？",
            "你能区分哪些决策需要深入分析，哪些应该快速决定吗？",
            "当团队有分歧时，你有有效的解决机制吗？"
        ],
        extensions: [
            "学习 RFC（Request for Comments）流程用于重大技术提案",
            "研究 ThoughtWorks 技术雷达了解行业决策趋势",
            "阅读《Thinking in Bets》了解在不确定性下做决策",
            "了解 DACI 框架（Driver, Approver, Contributor, Informed）明确决策角色"
        ],
        sourceUrls: [
            "https://adr.github.io/",
            "https://www.thoughtworks.com/radar",
            "https://www.amazon.com/Thinking-Bets-Making-Smarter-Decisions/dp/0735216355"
        ]
    },
    "tm-7-2": {
        lessonId: "tm-7-2",
        background: [
            "【架构治理定义】架构治理是确保系统架构符合组织目标、原则和标准的过程。它不是官僚主义的控制，而是通过清晰的原则和评审机制确保一致性和质量。",
            "【架构评审目的】架构评审（Architecture Review）有三个目标：1) 确保设计符合架构原则；2) 识别潜在风险和技术债务；3) 传播知识和最佳实践。评审应该是建设性的学习机会。",
            "【评审时机】常见的评审触发点：新系统设计、重大功能变更、跨团队集成、使用新技术、影响非功能需求（性能、安全、可扩展性）的变更。",
            "【轻量级治理】现代架构治理强调轻量级和自助式。通过架构原则、设计模板、自动化检查取代繁重的审批流程。目标是'护栏而非大门'（Guardrails, not Gates）。",
            "【C4 模型】Simon Brown 的 C4 模型提供四层架构视图：Context（系统上下文）、Container（容器）、Component（组件）、Code（代码）。这为架构评审提供了标准化的沟通语言。"
        ],
        keyDifficulties: [
            "【平衡控制与自主】过多治理会拖慢团队速度，过少会导致架构混乱。需要找到平衡点，通常的原则是'高风险高治理，低风险低治理'。",
            "【避免象牙塔架构师】脱离实际开发的架构师容易制定不切实际的标准。架构治理应该由实际参与开发的技术领导参与制定。",
            "【跨团队协调】在多团队环境中，确保架构一致性更加困难。需要建立跨团队的架构论坛或技术委员会。",
            "【评审效率】架构评审容易变成冗长低效的会议。需要明确评审范围、提前准备材料、设置时间限制。"
        ],
        handsOnPath: [
            "1. 建立架构原则：为团队制定5-10条架构原则，如'优先选择成熟技术'、'服务应该可独立部署'等",
            "2. 设计评审模板：创建架构评审的标准模板和检查清单",
            "3. 组织一次评审：选择一个新功能或系统，组织一次架构评审会议",
            "4. 学习 C4 模型：用 C4 模型绘制一个系统的架构图",
            "5. 评估治理成熟度：评估团队当前的架构治理实践，识别改进机会"
        ],
        selfCheck: [
            "团队是否有明确的架构原则？团队成员是否了解这些原则？",
            "架构评审的频率和深度是否合适？是否有评审但流于形式的情况？",
            "新人加入团队时，能否快速理解系统架构？有什么文档支持？",
            "跨团队的架构决策如何协调？是否有统一的论坛或委员会？",
            "架构治理是否阻碍了团队的交付速度？是否有团队抱怨流程过重？"
        ],
        extensions: [
            "学习 TOGAF 框架了解企业架构治理",
            "研究 Netflix 的架构治理实践",
            "了解 Architecture Fitness Functions 用于自动化架构检查",
            "阅读《Building Evolutionary Architectures》了解演进式架构"
        ],
        sourceUrls: [
            "https://c4model.com/",
            "https://www.thoughtworks.com/insights/articles/fitness-function-driven-development",
            "https://www.amazon.com/Building-Evolutionary-Architectures-Support-Constant/dp/1491986360"
        ]
    },
    "tm-7-3": {
        lessonId: "tm-7-3",
        background: [
            "【技术选型的重要性】技术选型决策会影响团队多年。选择错误的技术可能导致招聘困难、维护成本高、性能问题等长期痛点。因此需要系统性的选型方法。",
            "【选型维度】技术选型应考虑多个维度：功能适配性、性能特征、学习曲线、社区活跃度、商业支持、与现有技术栈的兼容性、长期维护成本。",
            "【技术雷达】ThoughtWorks 技术雷达将技术分为四个象限（技术、工具、平台、语言框架）和四个环（采纳、试验、评估、暂缓）。这提供了行业级的技术评估参考。",
            "【标准化的价值】技术标准化减少认知负荷、简化招聘、便于知识共享。但过度标准化会限制创新。需要找到'合理的多样性'平衡点。",
            "【创新采纳】引入新技术应遵循渐进式策略：先在低风险项目试点，积累经验后再推广。避免在关键系统上做技术实验。"
        ],
        keyDifficulties: [
            "【炒作与实质】技术领域充满炒作（Hype）。需要区分真正的技术进步和市场营销。关注技术解决什么问题，而非流行度。",
            "【团队能力】最好的技术如果团队不会用，也不是好选择。技术选型必须考虑团队当前能力和学习成本。",
            "【沉没成本】已有技术投资会影响判断。需要客观评估是否值得迁移，而非因为'已经投入很多'而坚持错误选择。",
            "【政治因素】技术选型有时涉及团队政治（如某团队想推广自己的工具）。决策者需要保持客观，基于技术优劣而非政治考量。"
        ],
        handsOnPath: [
            "1. 建立技术雷达：为团队创建内部技术雷达，标记采纳、试验、评估、暂缓的技术",
            "2. 技术选型流程：制定技术选型的标准流程和评估模板",
            "3. 选型练习：对一个实际技术选型需求，使用决策矩阵进行分析",
            "4. 标准化清单：列出团队当前的技术标准，评估是否需要更新",
            "5. 新技术评估：选择一个感兴趣的新技术，用标准化流程进行评估"
        ],
        selfCheck: [
            "团队是否有明确的技术栈标准？标准是否定期更新？",
            "引入新技术的流程是什么？是否有试点机制？",
            "技术选型决策是如何做出的？是否考虑了长期维护成本？",
            "团队是否有'禁止使用'的技术清单？原因是什么？",
            "如何平衡技术创新和稳定性？团队是否过于保守或过于激进？"
        ],
        extensions: [
            "研究 Boring Technology（无聊技术）理念",
            "了解 Gartner 技术成熟度曲线（Hype Cycle）",
            "学习如何进行技术 POC（Proof of Concept）",
            "阅读《Choose Boring Technology》by Dan McKinley"
        ],
        sourceUrls: [
            "https://www.thoughtworks.com/radar",
            "https://boringtechnology.club/",
            "https://mcfunley.com/choose-boring-technology"
        ]
    }
}

export const week7Quizzes: Record<string, QuizQuestion[]> = {
    "tm-7-1": [
        {
            id: "tm-7-1-q1",
            question: "ADR（Architecture Decision Records）应该包含哪些核心要素？",
            options: [
                "只需要记录最终决策",
                "标题、状态、上下文、决策、后果",
                "只需要记录技术细节",
                "只需要记录参与决策的人员"
            ],
            answer: 1,
            rationale: "ADR 应包含标题、状态、上下文、决策和后果，确保决策过程透明且可追溯。"
        },
        {
            id: "tm-7-1-q2",
            question: "Jeff Bezos 提出的 Type 1 和 Type 2 决策框架中，Type 2 决策的特点是什么？",
            options: [
                "不可逆的重大决策",
                "可逆的，应该快速决策并迭代",
                "需要 CEO 批准的决策",
                "涉及安全的决策"
            ],
            answer: 1,
            rationale: "Type 2 是可逆的决策，应该快速决策并迭代。大多数技术决策是 Type 2。"
        },
        {
            id: "tm-7-1-q3",
            question: "'Disagree and commit'（不同意但承诺）体现了什么团队文化？",
            options: [
                "独裁式管理文化",
                "健康的决策和执行文化",
                "回避冲突的文化",
                "缺乏主见的文化"
            ],
            answer: 1,
            rationale: "'Disagree and commit' 是健康团队文化的标志，决策后即使有保留意见也应全力支持执行。"
        },
        {
            id: "tm-7-1-q4",
            question: "技术决策矩阵的作用是什么？",
            options: [
                "自动做出决策",
                "系统性比较多个选项的优劣",
                "记录决策历史",
                "分配决策责任"
            ],
            answer: 1,
            rationale: "决策矩阵通过定义评估维度、分配权重、打分比较，帮助系统性比较多个选项。"
        },
        {
            id: "tm-7-1-q5",
            question: "在信息不完整的情况下做技术决策，关键是什么？",
            options: [
                "等待完美信息",
                "识别'足够好'的信息阈值",
                "让别人做决策",
                "随机选择"
            ],
            answer: 1,
            rationale: "关键是识别'足够好'的信息阈值，既避免决策瘫痪，也不过于草率。"
        },
        {
            id: "tm-7-1-q6",
            question: "处理技术团队分歧时，决策者需要区分什么？",
            options: [
                "资深和初级成员的意见",
                "'个人偏好'和'客观优劣'",
                "技术和非技术问题",
                "内部和外部意见"
            ],
            answer: 1,
            rationale: "决策者需要区分'个人偏好'和'客观优劣'，基于客观分析而非个人喜好做决策。"
        },
        {
            id: "tm-7-1-q7",
            question: "为什么需要对决策进行分类（如 Type 1/Type 2）？",
            options: [
                "满足合规要求",
                "识别哪些需要深入分析，哪些可以快速决定",
                "方便统计决策数量",
                "确定决策者的级别"
            ],
            answer: 1,
            rationale: "分类帮助识别哪些决策需要深入分析，哪些可以快速决定或授权，避免决策疲劳。"
        },
        {
            id: "tm-7-1-q8",
            question: "短期最优解往往带来什么问题？",
            options: [
                "成本过高",
                "长期技术债务",
                "团队不满",
                "管理复杂"
            ],
            answer: 1,
            rationale: "短期最优解往往不是长期最优，可能在半年后带来技术债务。"
        },
        {
            id: "tm-7-1-q9",
            question: "DACI 框架中的四个角色分别是什么？",
            options: [
                "Developer, Architect, Consultant, Implementer",
                "Driver, Approver, Contributor, Informed",
                "Designer, Analyst, Coder, Inspector",
                "Director, Admin, Creator, Inspector"
            ],
            answer: 1,
            rationale: "DACI 代表 Driver（驱动者）、Approver（批准者）、Contributor（贡献者）、Informed（知情者）。"
        },
        {
            id: "tm-7-1-q10",
            question: "为什么技术决策需要记录？",
            options: [
                "满足审计要求",
                "确保决策过程透明且可追溯，便于后续评估和学习",
                "方便追究责任",
                "增加工作量"
            ],
            answer: 1,
            rationale: "记录决策确保过程透明且可追溯，便于后续评估决策效果和从中学习。"
        },
        {
            id: "tm-7-1-q11",
            question: "RFC（Request for Comments）流程适用于什么类型的决策？",
            options: [
                "所有技术决策",
                "重大技术提案",
                "日常编码决策",
                "个人技术选择"
            ],
            answer: 1,
            rationale: "RFC 流程适用于重大技术提案，需要广泛征集意见和深入讨论。"
        },
        {
            id: "tm-7-1-q12",
            question: "技术决策原则的作用是什么？",
            options: [
                "替代所有决策",
                "作为快速决策的指导",
                "限制团队创新",
                "增加决策流程"
            ],
            answer: 1,
            rationale: "技术决策原则作为快速决策的指导，帮助团队在常见场景下做出一致的选择。"
        }
    ],
    "tm-7-2": [
        {
            id: "tm-7-2-q1",
            question: "架构治理的核心目的是什么？",
            options: [
                "控制团队的技术选择",
                "确保系统架构符合组织目标、原则和标准",
                "减少技术人员的自主权",
                "增加审批流程"
            ],
            answer: 1,
            rationale: "架构治理是确保系统架构符合组织目标、原则和标准的过程，而非官僚控制。"
        },
        {
            id: "tm-7-2-q2",
            question: "架构评审的三个目标是什么？",
            options: [
                "批准、拒绝、延期",
                "确保符合原则、识别风险、传播知识",
                "评估性能、安全、成本",
                "检查代码、文档、测试"
            ],
            answer: 1,
            rationale: "架构评审的三个目标是：确保设计符合架构原则、识别潜在风险、传播知识和最佳实践。"
        },
        {
            id: "tm-7-2-q3",
            question: "C4 模型的四层架构视图是什么？",
            options: [
                "Code, Class, Component, Container",
                "Context, Container, Component, Code",
                "Create, Configure, Connect, Compile",
                "Concept, Component, Class, Code"
            ],
            answer: 1,
            rationale: "C4 模型提供四层视图：Context（系统上下文）、Container（容器）、Component（组件）、Code（代码）。"
        },
        {
            id: "tm-7-2-q4",
            question: "'护栏而非大门'（Guardrails, not Gates）原则意味着什么？",
            options: [
                "完全取消治理",
                "通过原则和自动化检查而非繁重审批来实现治理",
                "设置更多门槛",
                "只允许特定人员通过"
            ],
            answer: 1,
            rationale: "轻量级治理强调通过架构原则、设计模板、自动化检查取代繁重的审批流程。"
        },
        {
            id: "tm-7-2-q5",
            question: "架构评审的常见触发点不包括以下哪项？",
            options: [
                "新系统设计",
                "重大功能变更",
                "日常 bug 修复",
                "使用新技术"
            ],
            answer: 2,
            rationale: "日常 bug 修复通常不需要架构评审，评审应聚焦于架构级别的变更。"
        },
        {
            id: "tm-7-2-q6",
            question: "如何避免'象牙塔架构师'问题？",
            options: [
                "让架构师专注于文档",
                "架构治理应由实际参与开发的技术领导参与制定",
                "减少架构师的权力",
                "取消架构师角色"
            ],
            answer: 1,
            rationale: "脱离实际的架构师容易制定不切实际的标准，治理应由实际参与开发的人参与制定。"
        },
        {
            id: "tm-7-2-q7",
            question: "平衡架构治理的原则是什么？",
            options: [
                "所有项目统一治理",
                "高风险高治理，低风险低治理",
                "只治理核心系统",
                "完全由团队自主决定"
            ],
            answer: 1,
            rationale: "平衡控制与自主的原则是'高风险高治理，低风险低治理'。"
        },
        {
            id: "tm-7-2-q8",
            question: "架构评审容易出现什么问题？",
            options: [
                "参与人数太少",
                "变成冗长低效的会议",
                "结论太简单",
                "缺少技术人员"
            ],
            answer: 1,
            rationale: "架构评审容易变成冗长低效的会议，需要明确范围、提前准备、设置时间限制。"
        },
        {
            id: "tm-7-2-q9",
            question: "Architecture Fitness Functions 的作用是什么？",
            options: [
                "评估架构师能力",
                "用于自动化架构检查",
                "计算架构成本",
                "评估团队绩效"
            ],
            answer: 1,
            rationale: "Architecture Fitness Functions 用于自动化架构检查，确保架构演进符合预期。"
        },
        {
            id: "tm-7-2-q10",
            question: "C4 模型的主要价值是什么？",
            options: [
                "替代所有架构图",
                "为架构沟通提供标准化语言",
                "自动生成代码",
                "评估架构性能"
            ],
            answer: 1,
            rationale: "C4 模型为架构评审和沟通提供了标准化的语言和视图层次。"
        },
        {
            id: "tm-7-2-q11",
            question: "跨团队架构一致性如何保证？",
            options: [
                "由单一架构师决定",
                "建立跨团队的架构论坛或技术委员会",
                "不需要保证一致性",
                "通过代码检查"
            ],
            answer: 1,
            rationale: "在多团队环境中，需要建立跨团队的架构论坛或技术委员会来协调架构一致性。"
        },
        {
            id: "tm-7-2-q12",
            question: "演进式架构（Evolutionary Architecture）的核心理念是什么？",
            options: [
                "一次性设计完美架构",
                "架构应该能够随着需求变化而演进",
                "尽量减少架构变更",
                "完全重写而非演进"
            ],
            answer: 1,
            rationale: "演进式架构强调架构应该能够随着需求和环境变化而持续演进。"
        }
    ],
    "tm-7-3": [
        {
            id: "tm-7-3-q1",
            question: "技术选型应该考虑的维度不包括以下哪项？",
            options: [
                "功能适配性和性能特征",
                "开发者个人偏好",
                "社区活跃度和商业支持",
                "与现有技术栈的兼容性"
            ],
            answer: 1,
            rationale: "技术选型应基于客观因素，而非个人偏好。应考虑功能、性能、社区、兼容性等维度。"
        },
        {
            id: "tm-7-3-q2",
            question: "ThoughtWorks 技术雷达的四个环是什么？",
            options: [
                "新、旧、推荐、禁止",
                "采纳、试验、评估、暂缓",
                "核心、扩展、实验、弃用",
                "必须、应该、可以、禁止"
            ],
            answer: 1,
            rationale: "技术雷达四个环：采纳（Adopt）、试验（Trial）、评估（Assess）、暂缓（Hold）。"
        },
        {
            id: "tm-7-3-q3",
            question: "技术标准化的主要价值是什么？",
            options: [
                "限制开发者选择",
                "减少认知负荷、简化招聘、便于知识共享",
                "减少技术投入",
                "满足合规要求"
            ],
            answer: 1,
            rationale: "技术标准化减少认知负荷、简化招聘、便于知识共享，但需要避免过度标准化。"
        },
        {
            id: "tm-7-3-q4",
            question: "引入新技术的推荐策略是什么？",
            options: [
                "直接在核心系统使用",
                "先在低风险项目试点，积累经验后再推广",
                "等待技术完全成熟",
                "让每个团队自己决定"
            ],
            answer: 1,
            rationale: "引入新技术应遵循渐进式策略，先在低风险项目试点，避免在关键系统做技术实验。"
        },
        {
            id: "tm-7-3-q5",
            question: "'Choose Boring Technology'（选择无聊技术）的理念是什么？",
            options: [
                "只使用过时技术",
                "优先选择成熟稳定的技术，而非追逐新潮",
                "技术越无聊越好",
                "避免所有新技术"
            ],
            answer: 1,
            rationale: "Boring Technology 理念强调优先选择成熟稳定的技术，减少未知风险。"
        },
        {
            id: "tm-7-3-q6",
            question: "技术选型中的'沉没成本'问题是什么？",
            options: [
                "新技术成本太高",
                "因为已有投资而坚持错误选择",
                "技术学习成本",
                "迁移成本"
            ],
            answer: 1,
            rationale: "沉没成本会影响客观判断，导致因为'已经投入很多'而坚持错误的技术选择。"
        },
        {
            id: "tm-7-3-q7",
            question: "Gartner 技术成熟度曲线（Hype Cycle）的作用是什么？",
            options: [
                "预测技术价格",
                "理解技术的成熟度和炒作周期",
                "评估技术性能",
                "比较技术厂商"
            ],
            answer: 1,
            rationale: "Hype Cycle 帮助理解技术的成熟度和炒作周期，避免在炒作高峰期做出错误决策。"
        },
        {
            id: "tm-7-3-q8",
            question: "技术选型必须考虑团队当前能力的原因是什么？",
            options: [
                "限制团队学习",
                "最好的技术如果团队不会用，也不是好选择",
                "节省培训成本",
                "避免团队反对"
            ],
            answer: 1,
            rationale: "最好的技术如果团队不会用，也不是好选择。选型必须考虑团队能力和学习成本。"
        },
        {
            id: "tm-7-3-q9",
            question: "技术雷达的四个象限是什么？",
            options: [
                "前端、后端、数据库、运维",
                "技术、工具、平台、语言框架",
                "开发、测试、部署、监控",
                "Web、移动、桌面、嵌入式"
            ],
            answer: 1,
            rationale: "ThoughtWorks 技术雷达分为四个象限：技术、工具、平台、语言框架。"
        },
        {
            id: "tm-7-3-q10",
            question: "如何区分技术炒作（Hype）和真正的技术进步？",
            options: [
                "看媒体报道数量",
                "关注技术解决什么问题，而非流行度",
                "看大公司是否采用",
                "看 GitHub Star 数量"
            ],
            answer: 1,
            rationale: "需要关注技术解决什么问题，而非流行度或炒作热度。"
        },
        {
            id: "tm-7-3-q11",
            question: "技术选型中的政治因素如何处理？",
            options: [
                "完全服从领导意见",
                "保持客观，基于技术优劣而非政治考量决策",
                "避免所有政治相关讨论",
                "让政治最强的团队决定"
            ],
            answer: 1,
            rationale: "决策者需要保持客观，基于技术优劣而非政治考量做出选择。"
        },
        {
            id: "tm-7-3-q12",
            question: "POC（Proof of Concept）在技术选型中的作用是什么？",
            options: [
                "证明技术最先进",
                "验证技术在特定场景下的可行性",
                "获得供应商折扣",
                "满足合规要求"
            ],
            answer: 1,
            rationale: "POC 用于验证技术在特定场景下的可行性，降低选型风险。"
        }
    ]
}
